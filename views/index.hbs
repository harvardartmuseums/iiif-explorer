<h1>{{title}}</h1>

<div id="sticker-panel">
	<input type="text" id="term">
	<button id="go">Go</button>
	<div id="results"></div>
</div>

<script type="text/javascript">
	$("#go").click(fetchTermImages);

	$("#term").keypress(function(event) {
		if ( event.which == 13 ) {
		
			var searchTerm = $("#term").val();
			var terms = searchTerm.split(" ");

			for (var i = terms.length - 1; i >= 0; i--) {
				fetchTermImages(terms[i]);
			}	 		
	 	}
	 });

	function fetchTermImages(term) {
		$.get("/data/terms/" + term, function (data) {
			if (data.length > 0) {
				var container = $("<div/>").attr("id", "");

				container.append($("<h1/>").html(term));

				data.forEach(function(d) {
					container.append($("<img/>")
						.attr("src", d.iiifTextImageURL)
						.attr("class", "draggable"));
				});

				$("#results").prepend(container);
			}
			interact('.draggable').draggable({onmove: dragMoveListener});
		});
	}

</script>